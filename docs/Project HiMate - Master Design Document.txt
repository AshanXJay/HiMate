Project HiMate: Master Design Document
Version: 1.0.0 Mission: "Scientific Roommate Allocation based on Chronobiology and Psychometrics."
1. Global Architecture & Standards
Everyone must strictly follow these rules to ensure the 5 slices fit together.
1.1 Tech Stack
Â·	Frontend: React 18 (Vite), Axios, Tailwind CSS (Styling), React Router Dom.
Â·	Backend: Python 3.10+, Django 4.2, Django REST Framework (DRF), SimpleJWT.
Â·	Database: MySQL 8.0 (Use mysqlclient connector).
Â·	Version Control: Git (Feature Branch Workflow).
1.2 The "Shared Foundation" (Dev 1 Responsibility)
Before splitting up, Dev 1 establishes these standards.
A. Visual Theme (Tailwind config):
Â·	Primary Color (Trust): Blue-600 (#2563EB) - Buttons, Links.
Â·	Secondary Color (Calm/Sleep): Teal-500 (#14B8A6) - Success states, Profile tags.
Â·	Background: Slate-50 (#F8FAFC) - App Background.
Â·	Font: 'Inter', sans-serif (Google Fonts).
B. Directory Structure (Strict Adherence):
Plaintext
/himate-project
  â”œâ”€â”€ /backend (Django)
  â”‚     â”œâ”€â”€ manage.py
  â”‚     â”œâ”€â”€ /core (Settings, Shared Utilities)
  â”‚     â”œâ”€â”€ /users (Dev 1 - Auth & Profile)
  â”‚     â”œâ”€â”€ /housing (Dev 2 - Hostels & Rooms)
  â”‚     â”œâ”€â”€ /allocation (Dev 3 - The Algo)
  â”‚     â”œâ”€â”€ /requests (Dev 4 - Swaps & Leave)
  â”‚     â””â”€â”€ /operations (Dev 5 - Dashboard & Issues)
  â”‚
  â””â”€â”€ /frontend (React + Vite)
        â”œâ”€â”€ /src
        â”‚     â”œâ”€â”€ /assets
        â”‚     â”œâ”€â”€ /components (Shared: Button, Input, Modal, Card)
        â”‚     â”œâ”€â”€ /context (AuthContext)
        â”‚     â”œâ”€â”€ /features
        â”‚     â”‚     â”œâ”€â”€ /auth (Dev 1)
        â”‚     â”‚     â”œâ”€â”€ /housing (Dev 2)
        â”‚     â”‚     â”œâ”€â”€ /allocation (Dev 3)
        â”‚     â”‚     â”œâ”€â”€ /requests (Dev 4)
        â”‚     â”‚     â””â”€â”€ /dashboard (Dev 5)
        â”‚     â””â”€â”€ App.jsx

1.3 Database Master Schema (MySQL)
All developers must agree on these field names.
1. Users (users_customuser) - Dev 1
Â·	id (PK), username, email, password.
Â·	role: Enum ['STUDENT', 'WARDEN'].
Â·	gender: Enum ['MALE', 'FEMALE'].
Â·	is_profile_complete: Boolean (Default False).
2. Profiles (users_studentprofile) - Dev 1
Â·	user_id (FK -> Users).
Â·	wake_up_time: Time (e.g., 08:00:00).
Â·	requires_darkness: Boolean.
Â·	cleanliness: Int (1-5).
Â·	guest_tolerance: Int (1-5).
Â·	dominance: Int (1-5).
3. Hostels (housing_hostel) - Dev 2
Â·	id (PK), name (e.g., "Block A").
Â·	gender_type: Enum ['MALE', 'FEMALE'].
Â·	caretaker_name: String.
4. Rooms (housing_room) - Dev 2
Â·	id (PK), hostel_id (FK).
Â·	room_number: String (e.g., "101").
Â·	capacity: Int (Default 4).
Â·	current_occupancy: Int (Default 0).
Â·	status: Enum ['AVAILABLE', 'FULL', 'MAINTENANCE'].
5. Allocations (allocation_allocation) - Dev 3
Â·	id (PK).
Â·	student_id (FK -> User).
Â·	room_id (FK -> Room).
Â·	semester: String (e.g., "Fall 2025").
6. Requests (requests_swap, requests_outpass) - Dev 4
Â·	Swap: student_a (FK), student_b (FK), status ['PENDING', 'APPROVED', 'REJECTED'].
Â·	Outpass: student_id (FK), leave_date, return_date, status.
7. Operations (operations_ticket) - Dev 5
Â·	student_id (FK), category (WiFi/Plumbing), description, status ['OPEN', 'RESOLVED'].
2. Developer Specifications (The "To-Do" Lists)
ðŸ‘¨â€ðŸ’» Developer 1: The Identity Lead (Auth & Profile)
Focus: Security & Scientific Data Collection.
Backend Tasks:
1.	Setup Django Project & core app.
2.	Install djangorestframework, djoser (for JWT).
3.	Create User model (Custom User Model) extending AbstractUser.
4.	Create StudentProfile model with the 5 specific scientific fields.
5.	API Endpoint: POST /api/auth/register/ (Standard Djoser).
6.	API Endpoint: PATCH /api/profile/update/ (Saves survey answers).
o	Logic: When profile is saved, set user.is_profile_complete = True.
Frontend Tasks:
1.	Setup React + Tailwind.
2.	Create Login.jsx & Register.jsx.
3.	Core Feature: SurveyWizard.jsx.
o	Slide 1: "When do you wake up?" (Time Picker).
o	Slide 2: "Can you sleep with lights on?" (Yes/No Toggle).
o	Slide 3: "Cleanliness Level" (Range Slider 1-5).
o	Slide 4: "Guest Tolerance" (Range Slider 1-5).
o	Slide 5: "Social Battery/Dominance" (Range Slider 1-5).
ðŸ‘¨â€ðŸ’» Developer 2: The Property Manager (Inventory)
Focus: CRUD Operations & Data Integrity.
Backend Tasks:
1.	Create housing app.
2.	Models: Hostel and Room.
3.	Seeding Script: Create management/commands/seed_hostels.py.
o	Action: Auto-generate 2 Hostels (Boys/Girls) with 50 rooms each.
1.	API Endpoint: GET /api/housing/hostels/ (List all).
2.	API Endpoint: GET /api/housing/hostels/{id}/rooms/ (List rooms for a building).
Frontend Tasks:
1.	Create features/housing/RoomGrid.jsx.
2.	UI: Display rooms as small cards.
o	Green Card = Available (0/4).
o	Yellow Card = Filling (2/4).
o	Red Card = Full (4/4).
o	Grey Card = Maintenance.
ðŸ‘¨â€ðŸ’» Developer 3: The Algorithm Engineer (The Core)
Focus: Python Logic & Optimization.
Backend Tasks:
1.	Create allocation app.
2.	Create Allocation model.
3.	The Engine (services.py): Implement the calculate_compatibility(student_a, student_b) function (as detailed in previous plan).
o	Constraint: Must import StudentProfile from users app.
1.	The Loop: Create logic to fetch all unassigned profiles, sort them, and commit to Allocation table.
2.	API Endpoint: POST /api/allocation/run/ (Admin only trigger).
3.	API Endpoint: GET /api/allocation/my-room/ (Student view).
Frontend Tasks:
1.	Create features/allocation/AllocationControl.jsx (Warden View).
o	Button: "Run Smart Allocation".
o	Display: Loading Spinner -> Success Message "Allocated 120 Students".
1.	Create MyRoom.jsx (Student View).
o	Display: "Room 101" and "Roommate Names".
ðŸ‘¨â€ðŸ’» Developer 4: The Workflow Manager (Requests)
Focus: State Management & Transactions.
Backend Tasks:
1.	Create requests app.
2.	Models: SwapRequest and OutPass.
3.	Swap Logic: Use transaction.atomic().
o	If Approved: Update Allocation table for Student A AND Student B.
o	If Failed: Rollback both.
1.	API Endpoint: POST /api/requests/swap/ (Create request).
2.	API Endpoint: POST /api/requests/outpass/ (Create pass).
Frontend Tasks:
1.	Create features/requests/SwapForm.jsx.
o	Dropdown: Select Student to swap with (Search by ID).
1.	Create features/requests/OutpassQR.jsx.
o	Show a static QR code image if status == 'APPROVED'.
ðŸ‘¨â€ðŸ’» Developer 5: The Operations Lead (Dashboard)
Focus: Data Viz & Maintenance.
Backend Tasks:
1.	Create operations app.
2.	Model: MaintenanceTicket.
3.	Dashboard Stats (views.py):
o	Count User where role='STUDENT'.
o	Count Allocation rows.
o	Count Room where status='AVAILABLE'.
1.	API Endpoint: GET /api/dashboard/stats/.
2.	API Endpoint: POST /api/operations/ticket/.
Frontend Tasks:
1.	Create features/dashboard/WardenDashboard.jsx.
o	Charts: Use recharts or chart.js.
o	Pie Chart: Occupied vs Empty Rooms.
o	Bar Chart: Maintenance Issues by Category (Wifi, Water, Electric).
1.	Create TicketList.jsx: Table of active complaints with "Mark Resolved" button.
3. Integration & Execution Order
To avoid "Merge Hell", follow this timeline:
Day 1:
Â·	Dev 1: Pushes User model and Auth system.
Â·	All Devs: Pull the repo so everyone has the User model.
Day 2:
Â·	Dev 2: Builds Hostels/Rooms and pushes Seeding Script.
Â·	Dev 3: Writes "Mock Students" script to test algorithm locally.
Â·	Dev 1: Finishes Profile API.
Day 3:
Â·	Dev 3: Connects Algorithm to real Database (Dev 1's Profiles + Dev 2's Rooms).
Â·	Dev 4 & 5: Build features on top of existing data.
Day 4:
Â·	Frontend Integration: Connect React pages to Django APIs.
Â·	Testing: Run the "Happy Path" (Register -> Allocator -> Swap).
4. Final Deliverable Checklist
1.	Repo: A single GitHub repo with /backend and /frontend.
2.	Report: Includes "The Science of Compatibility" section.
3.	Demo:
o	Show Admin Dashboard (Empty).
o	Register 4 Students (2 Early Birds, 2 Night Owls).
o	Click "Run Allocation".
o	Show Database: Early birds paired together, Owls paired together.
o	File a "Broken Fan" ticket.

